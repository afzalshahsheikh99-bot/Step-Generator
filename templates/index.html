<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notes.zip Processor | AI-Powered Security Assessment</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-shield-alt"></i>
                    <span>Notes.zip Processor</span>
                </div>
                <div class="header-badge">
                    <i class="fas fa-robot"></i>
                    <span>AI-Powered</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Hero Section -->
            <section class="hero-section">
                <div class="hero-content">
                    <h1>Transform Your Security Assessment Workflow</h1>
                    <p class="hero-description">
                        Upload your notes.zip file and let AI automatically analyze screenshots 
                        to generate precise, context-aware test steps for your security findings.
                    </p>
                </div>
            </section>

            <!-- Upload Section -->
            <section class="upload-section" id="upload-section">
                <div class="section-header">
                    <h2><i class="fas fa-cloud-upload-alt"></i> Upload Your File</h2>
                    <p class="section-subtitle">Drag & drop or click to upload your notes.zip file</p>
                </div>

                <div class="upload-container" id="upload-container">
                    <input type="file" id="file-input" accept=".zip" hidden>
                    <div class="upload-area" id="upload-area">
                        <div class="upload-icon">
                            <i class="fas fa-file-archive"></i>
                        </div>
                        <p class="upload-text">Drop your notes.zip file here</p>
                        <p class="upload-subtext">or click to browse</p>
                        <div class="upload-hint">
                            <i class="fas fa-info-circle"></i>
                            <span>Maximum file size: 100 MB</span>
                        </div>
                    </div>
                </div>

                <!-- File Info -->
                <div class="file-info" id="file-info" style="display: none;">
                    <div class="file-info-content">
                        <div class="file-icon">
                            <i class="fas fa-file-zipper"></i>
                        </div>
                        <div class="file-details">
                            <p class="file-name" id="file-name">filename.zip</p>
                            <p class="file-size" id="file-size">0 MB</p>
                        </div>
                        <button class="file-remove" id="file-remove">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>

                <!-- Process Button -->
                <div class="action-buttons" id="action-buttons" style="display: none;">
                    <button class="btn btn-primary btn-large" id="process-btn">
                        <i class="fas fa-magic"></i>
                        <span>Process with AI</span>
                    </button>
                </div>
            </section>

            <!-- Processing Section -->
            <section class="processing-section" id="processing-section" style="display: none;">
                <div class="section-header">
                    <h2><i class="fas fa-cogs"></i> Processing Your File</h2>
                    <p class="section-subtitle">AI is analyzing your security assessment screenshots</p>
                </div>

                <!-- Progress Overview -->
                <div class="progress-overview">
                    <div class="progress-cards">
                        <div class="progress-card">
                            <div class="progress-card-icon">
                                <i class="fas fa-search"></i>
                            </div>
                            <div class="progress-card-content">
                                <p class="progress-card-value" id="findings-count">0</p>
                                <p class="progress-card-label">Findings</p>
                            </div>
                        </div>
                        <div class="progress-card">
                            <div class="progress-card-icon">
                                <i class="fas fa-list-ol"></i>
                            </div>
                            <div class="progress-card-content">
                                <p class="progress-card-value" id="steps-count">0</p>
                                <p class="progress-card-label">Steps</p>
                            </div>
                        </div>
                        <div class="progress-card">
                            <div class="progress-card-icon">
                                <i class="fas fa-images"></i>
                            </div>
                            <div class="progress-card-content">
                                <p class="progress-card-value" id="images-count">0</p>
                                <p class="progress-card-label">Images</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Processing Status -->
                <div class="processing-status">
                    <div class="processing-indicator">
                        <div class="spinner"></div>
                        <span id="processing-status-text">Initializing AI model...</span>
                    </div>
                </div>

                <!-- Logs Section -->
                <div class="logs-section">
                    <div class="logs-header">
                        <h3><i class="fas fa-terminal"></i> Processing Logs</h3>
                        <button class="logs-toggle" id="logs-toggle">
                            <i class="fas fa-chevron-up"></i>
                        </button>
                    </div>
                    <div class="logs-container" id="logs-container">
                        <div class="logs-list" id="logs-list">
                            <div class="log-entry">
                                <span class="log-time">--:--:--</span>
                                <span class="log-message">Waiting to start...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section class="results-section" id="results-section" style="display: none;">
                <div class="results-header">
                    <div class="results-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2>Processing Complete!</h2>
                    <p>Your notes.zip file has been successfully processed with AI-generated steps</p>
                </div>

                <!-- Statistics -->
                <div class="results-stats">
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-folder-open"></i>
                            </div>
                            <div class="stat-value" id="result-findings">0</div>
                            <div class="stat-label">Findings Processed</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-tasks"></i>
                            </div>
                            <div class="stat-value" id="result-steps">0</div>
                            <div class="stat-label">Steps Generated</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div class="stat-value" id="result-images">0</div>
                            <div class="stat-label">Images Analyzed</div>
                        </div>
                    </div>
                </div>

                <!-- Download Section -->
                <div class="download-section">
                    <button class="btn btn-success btn-large" id="download-btn">
                        <i class="fas fa-download"></i>
                        <span>Download Processed File</span>
                    </button>
                    <button class="btn btn-secondary" id="reset-btn">
                        <i class="fas fa-redo"></i>
                        <span>Process Another File</span>
                    </button>
                </div>
            </section>

            <!-- Error Section -->
            <section class="error-section" id="error-section" style="display: none;">
                <div class="error-content">
                    <div class="error-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <h2>Processing Failed</h2>
                    <p class="error-message" id="error-message">An error occurred while processing your file.</p>
                    <button class="btn btn-secondary" id="error-reset-btn">
                        <i class="fas fa-redo"></i>
                        <span>Try Again</span>
                    </button>
                </div>
            </section>

            <!-- Features Section -->
            <section class="features-section">
                <div class="section-header">
                    <h2><i class="fas fa-star"></i> Key Features</h2>
                </div>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3>AI-Powered Analysis</h3>
                        <p>Advanced Gemini AI analyzes screenshots with precision and generates context-aware test steps</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <h3>Context-Aware Processing</h3>
                        <p>Reads information.txt files to understand the specific security vulnerability being tested</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-sync-alt"></i>
                        </div>
                        <h3>API Key Rotation</h3>
                        <p>Automatically rotates between multiple API keys for reliable processing at scale</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h3>Real-Time Updates</h3>
                        <p>Live progress tracking with detailed logs showing exactly what's being processed</p>
                    </div>
                </div>
            </section>

            <!-- Instructions Section -->
            <section class="instructions-section">
                <div class="section-header">
                    <h2><i class="fas fa-info-circle"></i> How It Works</h2>
                </div>
                <div class="instructions-grid">
                    <div class="instruction-card">
                        <div class="instruction-number">1</div>
                        <h3>Upload File</h3>
                        <p>Upload your notes.zip file containing security assessment images and folder structure</p>
                    </div>
                    <div class="instruction-card">
                        <div class="instruction-number">2</div>
                        <h3>AI Analysis</h3>
                        <p>AI reads finding context from information.txt and analyzes all screenshots</p>
                    </div>
                    <div class="instruction-card">
                        <div class="instruction-number">3</div>
                        <h3>Step Generation</h3>
                        <p>Context-aware test steps are generated and written to Description.txt files</p>
                    </div>
                    <div class="instruction-card">
                        <div class="instruction-number">4</div>
                        <h3>Download Results</h3>
                        <p>Download your processed notes.zip with all AI-generated test steps</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>Notes.zip Processor | Powered by Google Gemini AI</p>
                <p class="footer-subtitle">Automating security assessment workflow with intelligent step generation</p>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>
